<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>React Native Dropbox Sign App</title>
	<script src="https://cdn.hellosign.com/public/js/embedded/v2.11.1/embedded.development.js"></script>
	<link rel="stylesheet" href="../styles/styles.css">
</head>

<body>
	<div id="esig-container"><div>

	<script>
		//const client = new window.HelloSign({
			//clientId: '49abd1267e8decb73c99a81ae464107e'
		//});

		function openHelloSign() {
			window.postMessage("Hello React", "*")
			console.log("entro")
			const signatureId = '56f72ca91a3ba473ccbcee23aa8686ce'; // Reemplazar con el ID de la firma
			const apiKey = 'de099e61c90feda4b3dec7fd512def13d4ce958867af80d8197bce7896d95280'; // Reemplazar con tu clave API de HelloSign

			const authOptions = {
				headers: {
					'Authorization': 'Basic ' + btoa(apiKey + ':')
				}
			};

			const response = fetch(`https://api.hellosign.com/v3/embedded/sign_url/${signatureId}`, authOptions)
				.then(response => {
					if (!response.ok) {
						throw new Error('Network response was not ok');
					}
					return response.json();
				})
				.then(data => {
					console.log('Sign URL:', data);
					openSign(data)
				})
				.catch(error => {
					console.error('Error:', error);
					// Manejar el error si ocurre
				});
		}

		function openSign(data) {
			console.log("entro", data)
			//const signUrl = data.embedded.sign_url;
			client.open(signUrl, {
				skipDomainVerification: true,
				container: document.getElementById('hellosign-document-container'),
				allowCancel: true,
				debug: true,
				testMode: true
			});
		}

	//document.querySelector('button').onclick(() => {console.log("Send POST message"); window.postMessage("Hello React", "*")});
	//document.getElementById('openHelloSign').addEventListener('click', openHelloSign);
	</script>
</body>
</html>